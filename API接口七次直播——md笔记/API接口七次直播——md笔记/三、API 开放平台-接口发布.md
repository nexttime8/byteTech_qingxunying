---
title: 三、API 开放平台-接口发布
categories: 
- API 开放平台
tags:  
- 星球项目
---

# 三、接口发布-下线-调用

1. 开发接口发布、下线的功能（管理员）
2. 前端去浏览接口、查看接口文档、申请签名（注册）
3. 在线调试（用户）
4. 统计用户调用接口的次数
5. 优化系统 - API 网关

## 开发接口发布/下线功能

后台接口：

发布接口（仅管理员可操作）

1. 校验该接口是否存在
2. 判断该接口是否可以调用
3. 修改接口数据库中的状态字段为 1

下线接口（仅管理员可操作）

1. 校验接口是否存在
2. 修改接口数据库中的状态字段为 0

## 查看接口文档

动态路由，用 url 来传递 id, 加载不同的接口信息

## 申请签名

用户在注册成功时，自动分配 accessKey、secretKey 

扩展点：用户可以申请更换签名

## 在线调用

```json
[
    {"name":"username", "type":"string"}
]
```

先跑通整个接口流程，再去针对不同的请求头或者接口类型来设计界面和表单，给用户更好的体验。（可以参考 swagger、postman、knife4j)

## 调用流程

![image-20221204191022426](https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com//9963/202212041910410.png)

流程：

1. 前端将用户输入的请求参数和要测试的接口 id 发给平台后端
2. 在调用前可以做一些校验
3. 平台后端去调用模拟接口

## TODO

- 判断该接口是否可以调用时有固定方法名改为根据测试地址来调用
- 用户测试接口固定方法名改为根据测试地址来调用
- 模拟接口改为从数据库校验 accessKey

